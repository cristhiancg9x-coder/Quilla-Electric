import{i as m,k as p,h as c,G as w,m as v}from"./config.Cl1_ynzc.js";let l=[],n=0;const a=4,g=t=>{let s=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(o){return e.lc=s.push(o),()=>{for(let r=n+a;r<l.length;)l[r]===o?l.splice(r,a):r+=a;let i=s.indexOf(o);~i&&(s.splice(i,1),--e.lc||e.off())}},notify(o,i){let r=!l.length;for(let d of s)l.push(d,e.value,o,i);if(r){for(n=0;n<l.length;n+=a)l[n](l[n+1],l[n+2],l[n+3]);l.length=0}},off(){},set(o){let i=e.value;i!==o&&(e.value=o,e.notify(i))},subscribe(o){let i=e.listen(o);return o(e.value),i},value:t};return e},u=g(null),f=g(!1),h="cristhiancg9x@gmail.com";m(c,t=>{t?(u.set(t),f.set(t.email===h)):(u.set(null),f.set(!1))});const I=async()=>{const t=new w;try{await v(c,t),c.currentUser.email===h?window.location.href="/admin":window.location.href="/servicios"}catch(s){console.error("Error login:",s)}},x=async()=>{try{console.log("☢️ Iniciando Limpieza Nuclear de Sesión..."),await p(c),document.cookie="admin_session=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.clear(),sessionStorage.clear(),u.set(null),f.set(!1),console.log("✅ Todo limpio. Redirigiendo..."),window.location.href="/login"}catch(t){console.error("Error al salir:",t),window.location.href="/login"}};export{u as $,I as a,f as b,x as l};

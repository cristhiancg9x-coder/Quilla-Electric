---
// src/layouts/MainLayout.astro
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import WhatsappButton from '../components/WhatsappButton.astro';

// 1. Recibimos las variables (Props)
const { 
  titulo, 
  descripcion = "Servicios eléctricos profesionales en Arequipa. Pozos a tierra y cableado.",
  imagen = "/img/social-default.jpeg" // Imagen por defecto si la página no tiene una específica
} = Astro.props;

// 2. Truco SEO: Convertir la imagen a URL absoluta (Ej: https://quillaelectric.site/img/foto.jpg)
// Si no hacemos esto, WhatsApp a veces no muestra la foto.
const siteURL = Astro.site ? Astro.site.href : Astro.url.origin;
const imagenAbsoluta = new URL(imagen, siteURL).href;
---

<html lang="es-PE">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    
    <title>{titulo} | Quilla Electric</title>
    <meta name="description" content={descripcion} />
    <link rel="canonical" href={Astro.url} />
    
    <meta property="og:title" content={titulo} />
    <meta property="og:description" content={descripcion} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:image" content={imagenAbsoluta} /> <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <meta name="google-site-verification" content="v9b95geQ84lPrqkhNMwzQhD3hu9WmAT8F2M60z5rbGA" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Electrician",
        "name": "Quilla Electric",
        "image": "https://quillaelectric.site/logo.png",
        "@id": "https://quillaelectric.site",
        "url": "https://quillaelectric.site",
        "telephone": "+51951413458",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Cerro Colorado",
          "addressLocality": "Arequipa",
          "addressRegion": "Arequipa",
          "postalCode": "04014",
          "addressCountry": "PE"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": -16.3766,
          "longitude": -71.5602
        },
        "areaServed": [
          "Cerro Colorado",
          "Cayma",
          "Yanahuara",
          "Arequipa"
        ],
        "priceRange": "$$"
      }
    </script>    
  </head>
  
  <body>
    <Navbar />

    <main>
      <slot /> </main>

    <Footer />
    <WhatsappButton />
  </body>
</html>

<style>
  /* ESTILOS GLOBALES */
  body {
    font-family: system-ui, -apple-system, sans-serif;
    margin: 0;
    background-color: #f8fafc;
    color: #1e293b;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  main {
    flex: 1;
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    box-sizing: border-box;
  }
</style>